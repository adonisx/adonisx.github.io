<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Extensions | AdonisX</title>
    <meta name="generator" content="VuePress 1.4.1">
    <link rel="icon" href="/logo.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <meta name="description" content="Fastest way to create simple Rest API by defining database models and their relations.">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    <link rel="preload" href="/assets/css/0.styles.9c53e19f.css" as="style"><link rel="preload" href="/assets/js/app.a6036e9a.js" as="script"><link rel="preload" href="/assets/js/2.8ce952cd.js" as="script"><link rel="preload" href="/assets/js/11.bf932905.js" as="script"><link rel="prefetch" href="/assets/js/10.6e5ab08e.js"><link rel="prefetch" href="/assets/js/12.be5f77e4.js"><link rel="prefetch" href="/assets/js/13.85e7a3dd.js"><link rel="prefetch" href="/assets/js/3.67f105a1.js"><link rel="prefetch" href="/assets/js/4.625aa287.js"><link rel="prefetch" href="/assets/js/5.0912c8bf.js"><link rel="prefetch" href="/assets/js/6.e1174c18.js"><link rel="prefetch" href="/assets/js/7.06cb3a2f.js"><link rel="prefetch" href="/assets/js/8.f9c4ec6e.js"><link rel="prefetch" href="/assets/js/9.09b7c505.js">
    <link rel="stylesheet" href="/assets/css/0.styles.9c53e19f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">AdonisX</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/adonisx/adonisx" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/adonisx/adonisx-cli" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CLI
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://sonarcloud.io/dashboard?id=ozziest_apix" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Sonarcloud
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/adonisx/adonisx" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://github.com/adonisx/adonisx-cli" target="_blank" rel="noopener noreferrer" class="nav-link external">
  CLI
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="https://sonarcloud.io/dashboard?id=ozziest_apix" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Sonarcloud
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/" class="sidebar-link">Home</a></li><li><a href="/01-introduction/" class="sidebar-link">Introduction</a></li><li><a href="/02-getting-started/" class="sidebar-link">Getting Started</a></li><li><a href="/03-models/" class="sidebar-link">Models</a></li><li><a href="/04-queries/" class="sidebar-link">Queries</a></li><li><a href="/05-extensions/" class="active sidebar-link">Extensions</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/05-extensions/#why" class="sidebar-link">Why?</a></li><li class="sidebar-sub-header"><a href="/05-extensions/#differences" class="sidebar-link">Differences</a></li><li class="sidebar-sub-header"><a href="/05-extensions/#example" class="sidebar-link">Example</a></li><li class="sidebar-sub-header"><a href="/05-extensions/#extentable-actions" class="sidebar-link">Extentable Actions</a></li></ul></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="extensions"><a href="#extensions" class="header-anchor">#</a> Extensions</h1> <h2 id="why"><a href="#why" class="header-anchor">#</a> Why?</h2> <p>In real world, everybody needs more than saving and listing records. Everybody needs more complicated logic in their code. <strong>AdonisX</strong> provides you a basic structure of an API. It provides you basic CRUD actions with where dynamic query options. But when you need custom logics, you will not be alone. <strong>AdonisX</strong> provides your some points to extend your HTTP requests and manipulate them.</p> <p>There are two different ways to add your business logic; <strong>Triggers</strong> and <strong>Events</strong>.</p> <p>You may use <strong>Triggers</strong> and <strong>Events</strong> in order to add your business logic. To use them, you should use <code>triggers.js</code> or <code>events.js</code> under <strong>start</strong> folder. <strong>Events</strong> are actually AdonisJS' features and you can read its documentation in <a href="https://adonisjs.com/docs/4.1/events" target="_blank" rel="noopener noreferrer">here<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. But also, we added <strong>Triggers</strong> to our structure to have more control over database actions such as GET, POST, UPDATE and DELETE.</p> <h2 id="differences"><a href="#differences" class="header-anchor">#</a> Differences</h2> <p>The main difference between <strong>triggers</strong> and <strong>events</strong> is; events are <strong>asynchronous</strong>. It means that if you are using trigger and handle an the action, HTTP request cycle waits for you to done your task. But in events, when you handle an action, HTTP requests cycle keeps working and return a responses. So that, if you want to send an e-mail to the user, you should use <strong>events</strong>. On the other hand, if you want to be involved to the query or any business logics in HTTP request cycle, you should use <strong>triggers</strong>.</p> <h2 id="example"><a href="#example" class="header-anchor">#</a> Example</h2> <p>Trigger and event definitions are almost same.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> Trigger <span class="token operator">=</span> <span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'Trigger'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> Event <span class="token operator">=</span> <span class="token function">use</span><span class="token punctuation">(</span><span class="token string">'Event'</span><span class="token punctuation">)</span>

Trigger<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'onBeforeCreateUser'</span><span class="token punctuation">,</span> <span class="token string">'UserListener.checkEmailExists'</span><span class="token punctuation">)</span>
Event<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'onAfterCreateUser'</span><span class="token punctuation">,</span> <span class="token string">'UserListener.sendEmail'</span><span class="token punctuation">)</span>
</code></pre></div><p>To define a trigger for a model, you should use this structure. In this structure, there are two argument which you can use;</p> <ul><li><code>when</code>: When your method will be triggerred.</li> <li><code>method</code>: Which method will be triggered.</li></ul> <p>In this example, methods will be triggers in <strong>UserListener</strong> file for before create a new record on <code>User</code> model.</p> <p>This is how <code>UserListener.js</code> looks under <code>app</code> folder;</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">UserListener</span> <span class="token punctuation">{</span>
  <span class="token keyword">async</span> <span class="token function">checkEmailExists</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> request<span class="token punctuation">,</span> params<span class="token punctuation">,</span> data <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Implement you business logic in here.</span>
  <span class="token punctuation">}</span>

  <span class="token function">sendEmail</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> request<span class="token punctuation">,</span> params<span class="token punctuation">,</span> data <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Implement you business logic in here...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> UserTrigger
</code></pre></div><h2 id="extentable-actions"><a href="#extentable-actions" class="header-anchor">#</a> Extentable Actions</h2> <p>You can handle almost every actions on models. Please look at following tables;</p> <table><thead><tr><th>ActionName{Model}</th> <th>Variables</th></tr></thead> <tbody><tr><td>onBeforeCreate{User}</td> <td>request, params, data</td></tr> <tr><td>onBeforeUpdate{User}</td> <td>request, params, item</td></tr> <tr><td>onBeforeDelete{User}</td> <td>request, params, query</td></tr> <tr><td>onBeforePaginate{User}</td> <td>query</td></tr> <tr><td>onBeforeShow{User}</td> <td>query</td></tr> <tr><td>onAfterCreate{User}</td> <td>request, params, data, item</td></tr> <tr><td>onAfterUpdate{User}</td> <td>request, params, item</td></tr> <tr><td>onAfterDelete{User}</td> <td>item</td></tr> <tr><td>onAfterPaginate{User}</td> <td>result</td></tr> <tr><td>onAfterShow{User}</td> <td>item</td></tr></tbody></table></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/04-queries/" class="prev">
        Queries
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.a6036e9a.js" defer></script><script src="/assets/js/2.8ce952cd.js" defer></script><script src="/assets/js/11.bf932905.js" defer></script>
  </body>
</html>
