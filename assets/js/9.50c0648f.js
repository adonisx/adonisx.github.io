(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{331:function(t,s,e){"use strict";e.r(s);var a=e(33),n=Object(a.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"routes"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#routes"}},[t._v("#")]),t._v(" Routes")]),t._v(" "),e("p",[t._v("Routes enable the outside world to interact with your app via URLs ["),e("a",{attrs:{href:"https://adonisjs.com/docs/4.1/routing",target:"_blank",rel:"noopener noreferrer"}},[t._v("AdonisJs Routing"),e("OutboundLink")],1),t._v("]. But also, they are the heart of the application in "),e("strong",[t._v("AdonisX")]),t._v(".")]),t._v(" "),e("p",[t._v("You have to define routes by writing codes in many different frameworks such as "),e("a",{attrs:{href:"https://adonisjs.com/docs/4.1/routing",target:"_blank",rel:"noopener noreferrer"}},[t._v("AdonisJs"),e("OutboundLink")],1),t._v(", "),e("a",{attrs:{href:"https://laravel.com/docs/7.x/routing",target:"_blank",rel:"noopener noreferrer"}},[t._v("Laravel"),e("OutboundLink")],1),t._v(", etc. For example, in AdonisJs, you can use the following code to define a simple route;")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("Route"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'api/users'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'UserController.index'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("p",[t._v("It is very simple. But again, if we have many different models we need to define all routes by writing code. Nevertheless, there are strong "),e("a",{attrs:{href:"https://www.vinaysahni.com/best-practices-for-a-pragmatic-restful-api",target:"_blank",rel:"noopener noreferrer"}},[t._v("API Best Practices"),e("OutboundLink")],1),t._v(" out there, many developers agree on it. In "),e("strong",[t._v("AdonisX")]),t._v(", we thought that why we don't create routes "),e("strong",[t._v("automatically")]),t._v(" even we know all relationships between models. This is the "),e("strong",[t._v("key")]),t._v(" point to create "),e("strong",[t._v("AdonisX")]),t._v(".")]),t._v(" "),e("h2",{attrs:{id:"auto-detection"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#auto-detection"}},[t._v("#")]),t._v(" Auto Detection")]),t._v(" "),e("p",[t._v("When you create a new database "),e("strong",[t._v("model")]),t._v(", "),e("strong",[t._v("AdonisX")]),t._v(" analyzes its structure to create routes automatically. Let's assume that you have a model like this;")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" XModel "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'AdonisX/Models/XModel'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("XModel")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("get")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("table")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'users'")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("You have to define all routes for this model by applying best practices manually if you have a model like this. But why? We already know the model and the table name. We already know the best practices. Why we shouldn't create routes automatically?")]),t._v(" "),e("p",[t._v("In AdonisX, we create the following routes automatically if you have a model like this;")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("Method")]),t._v(" "),e("th",[t._v("Url")]),t._v(" "),e("th",[t._v("Behavior")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("GET")]),t._v(" "),e("td",[e("code",[t._v("api/users")])]),t._v(" "),e("td",[t._v("Paginating all records")])]),t._v(" "),e("tr",[e("td",[t._v("POST")]),t._v(" "),e("td",[e("code",[t._v("api/users")])]),t._v(" "),e("td",[t._v("Creating a new record")])]),t._v(" "),e("tr",[e("td",[t._v("GET")]),t._v(" "),e("td",[e("code",[t._v("api/users/:id")])]),t._v(" "),e("td",[t._v("Fetching only one record by id")])]),t._v(" "),e("tr",[e("td",[t._v("PUT")]),t._v(" "),e("td",[e("code",[t._v("api/users/:id")])]),t._v(" "),e("td",[t._v("Updating a record by id")])]),t._v(" "),e("tr",[e("td",[t._v("DELETE")]),t._v(" "),e("td",[e("code",[t._v("api/users/:id")])]),t._v(" "),e("td",[t._v("Deleting a record by id")])])])]),t._v(" "),e("p",[t._v("All methods are "),e("strong",[t._v("ready")]),t._v(" to be used for your model. This is the magic of "),e("strong",[t._v("AdonisX")]),t._v(".")]),t._v(" "),e("h2",{attrs:{id:"allow-specific-http-methods"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#allow-specific-http-methods"}},[t._v("#")]),t._v(" Allow Specific HTTP Methods")]),t._v(" "),e("p",[t._v("You can access all possible methods for a model if you don't deny any HTTP method. For example, let's assume that you don't want to allow the "),e("code",[t._v("DELETE")]),t._v(" method. In this case, you should add the following method in your model structure;")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("XModel")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("get")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("actions")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'GET'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'POST'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'PUT'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("If your model a method called "),e("code",[t._v("actions")]),t._v(" and if that method has an array like this, you will not have a "),e("code",[t._v("DELETE")]),t._v(" route anymore.")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("Method")]),t._v(" "),e("th",[t._v("Url")]),t._v(" "),e("th",[t._v("Behavior")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("GET")]),t._v(" "),e("td",[e("code",[t._v("api/users")])]),t._v(" "),e("td",[t._v("Paginating all records")])]),t._v(" "),e("tr",[e("td",[t._v("POST")]),t._v(" "),e("td",[e("code",[t._v("api/users")])]),t._v(" "),e("td",[t._v("Creating a new record")])]),t._v(" "),e("tr",[e("td",[t._v("GET")]),t._v(" "),e("td",[e("code",[t._v("api/users/:id")])]),t._v(" "),e("td",[t._v("Fetching only one record by id")])]),t._v(" "),e("tr",[e("td",[t._v("PUT")]),t._v(" "),e("td",[e("code",[t._v("api/users/:id")])]),t._v(" "),e("td",[t._v("Updating a record by id")])])])]),t._v(" "),e("h2",{attrs:{id:"related-routes"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#related-routes"}},[t._v("#")]),t._v(" Related Routes")]),t._v(" "),e("p",[t._v("We want to build related routes when we have related resources. For example, let's assume we have two tables; "),e("code",[t._v("users")]),t._v(" and "),e("code",[t._v("posts")]),t._v(" and these tables are related like the following schema;")]),t._v(" "),e("div",{staticStyle:{"text-align":"center"}},[e("p",[e("img",{attrs:{src:"/images/routes-01.png",alt:"Database Schema"}})])]),t._v(" "),e("p",[t._v("In this case, we need routes like this;")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("Method")]),t._v(" "),e("th",[t._v("Url")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("GET")]),t._v(" "),e("td",[e("code",[t._v("api/users")])])]),t._v(" "),e("tr",[e("td",[t._v("POST")]),t._v(" "),e("td",[e("code",[t._v("api/users")])])]),t._v(" "),e("tr",[e("td",[t._v("GET")]),t._v(" "),e("td",[e("code",[t._v("api/users/:id")])])]),t._v(" "),e("tr",[e("td",[t._v("PUT")]),t._v(" "),e("td",[e("code",[t._v("api/users/:id")])])]),t._v(" "),e("tr",[e("td",[t._v("GET")]),t._v(" "),e("td",[e("code",[t._v("api/users/:userId/posts")])])]),t._v(" "),e("tr",[e("td",[t._v("POST")]),t._v(" "),e("td",[e("code",[t._v("api/users/:userId/posts")])])]),t._v(" "),e("tr",[e("td",[t._v("GET")]),t._v(" "),e("td",[e("code",[t._v("api/users/:userId/posts/:id")])])]),t._v(" "),e("tr",[e("td",[t._v("PUT")]),t._v(" "),e("td",[e("code",[t._v("api/users/:userId/posts/:id")])])])])]),t._v(" "),e("p",[t._v("Creating routes in "),e("strong",[t._v("AdonisX")]),t._v(" like these is very simple. There is only one thing we should do; "),e("a",{attrs:{href:"https://adonisjs.com/docs/4.1/relationships",target:"_blank",rel:"noopener noreferrer"}},[t._v("defining relationship"),e("OutboundLink")],1),t._v(" between models. For this case, we should have the following model definitions;")]),t._v(" "),e("p",[t._v("For "),e("code",[t._v("User.js")]),t._v(" model file;")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("User")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("XModel")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("posts")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasMany")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'App/Models/Post'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("For "),e("code",[t._v("Post.js")]),t._v(" model file;")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Post")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("XModel")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("user")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasOne")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'App/Models/User'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'user_id'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'id'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("This is the simple relationship definition in "),e("a",{attrs:{href:"https://adonisjs.com/docs/4.1/relationships",target:"_blank",rel:"noopener noreferrer"}},[t._v("Lucid Models"),e("OutboundLink")],1),t._v(". The routes will be created "),e("strong",[t._v("automatically")]),t._v(" when you create a model definition like this.")]),t._v(" "),e("p",[t._v("Also, if you more complex relationships, "),e("strong",[t._v("AdonisX")]),t._v(" will follow your relations.")]),t._v(" "),e("h2",{attrs:{id:"custom-middlewares"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#custom-middlewares"}},[t._v("#")]),t._v(" Custom Middlewares")]),t._v(" "),e("p",[t._v("You may use the following statements in model structure to add your logics to some routes for some models;")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" XModel "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'AdonisX/Models/XModel'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Users")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("XModel")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("get")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("table")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'users'")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("get")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("middlewares")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'App/Middleware/CallOnAllRequestsMiddleware'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" method"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'GET'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" middleware"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'App/Middleware/CallOnGETMiddleware'")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" method"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'POST'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" middleware"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'App/Middleware/CallOnPOSTMiddleware'")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("In here, you can add multiple different "),e("strong",[t._v("Middleware")]),t._v(" layer for a model. But also you can specify it for only some methods.")]),t._v(" "),e("p",[t._v("With this, you can add an "),e("a",{attrs:{href:"https://adonisjs.com/docs/4.1/middleware",target:"_blank",rel:"noopener noreferrer"}},[t._v("AdonisJs Middleware"),e("OutboundLink")],1),t._v(" for your model routes.")]),t._v(" "),e("h2",{attrs:{id:"recursive-resources"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#recursive-resources"}},[t._v("#")]),t._v(" Recursive Resources")]),t._v(" "),e("p",[t._v("Creating a recursive model is very simple with AdonisX. Just add the following relationship structure and it is done! You can use a recursive resource in this way.")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" XModel "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'AdonisX/Models/XModel'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Category")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("extends")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("XModel")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("get")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("table")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'categories'")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("get")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("fillable")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'title'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("categories")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasMany")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'App/Models/Category'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("category")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasOne")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'App/Models/Category'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("When you define a recursive resource like this, you will have the following routes to access the resource;")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("Method")]),t._v(" "),e("th",[t._v("Route")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("GET")]),t._v(" "),e("td",[e("code",[t._v("api/categories")])])]),t._v(" "),e("tr",[e("td",[t._v("GET")]),t._v(" "),e("td",[e("code",[t._v("api/categories/:id")])])]),t._v(" "),e("tr",[e("td",[t._v("POST")]),t._v(" "),e("td",[e("code",[t._v("api/categories")])])]),t._v(" "),e("tr",[e("td",[t._v("PUT")]),t._v(" "),e("td",[e("code",[t._v("api/categories/:id")])])]),t._v(" "),e("tr",[e("td",[t._v("DELETE")]),t._v(" "),e("td",[e("code",[t._v("api/categories/:id")])])]),t._v(" "),e("tr",[e("td",[t._v("GET")]),t._v(" "),e("td",[e("code",[t._v("api/categories/:categoryId/children")])])]),t._v(" "),e("tr",[e("td",[t._v("GET")]),t._v(" "),e("td",[e("code",[t._v("api/categories/:categoryId/children/:id")])])]),t._v(" "),e("tr",[e("td",[t._v("POST")]),t._v(" "),e("td",[e("code",[t._v("api/categories/:categoryId/children")])])]),t._v(" "),e("tr",[e("td",[t._v("PUT")]),t._v(" "),e("td",[e("code",[t._v("api/categories/:categoryId/children/:id")])])]),t._v(" "),e("tr",[e("td",[t._v("DELETE")]),t._v(" "),e("td",[e("code",[t._v("api/categories/:categoryId/children/:id")])])])])])])}),[],!1,null,null,null);s.default=n.exports}}]);